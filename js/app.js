(()=>{"use strict";class e{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const t={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:(()=>{if("undefined"!=typeof localStorage)return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,t)=>Promise.resolve(localStorage.setItem(e,t)),remove:e=>Promise.resolve(localStorage.removeItem(e))}})()},i=e=>e?"string"==typeof e?{publicKey:e}:"[object Object]"===e.toString()?e:{}:{},s=async(s,o,n,l)=>{const a=i(l),r=a.publicKey||t.publicKey,c=a.blockHeadless||t.blockHeadless,d=a.storageProvider||t.storageProvider,m={...t.blockList,...a.blockList},y={...t.limitRate,...a.limitRate};if(c&&(e=>e.webdriver||!e.languages||0===e.languages.length)(navigator))return Promise.reject(new e(451,"Unavailable For Headless Browser"));if(((e,t,i)=>{if(!e||"string"!=typeof e)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||"string"!=typeof t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!i||"string"!=typeof i)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"})(r,s,o),(e=>{if(e&&"[object Object]"!==e.toString())throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"})(n),n&&((e,t)=>{if((e=>!e.list?.length||!e.watchVariable)(e))return!1;((e,t)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if("string"!=typeof t)throw"The BlockList watchVariable has to be a string"})(e.list,e.watchVariable);const i=(s=t,o=e.watchVariable,s instanceof FormData?s.get(o):s[o]);var s,o;return"string"==typeof i&&e.list.includes(i)})(m,n))return Promise.reject(new e(403,"Forbidden"));if(await(async(e,t,i)=>{if(!t.throttle||!i)return!1;((e,t)=>{if("number"!=typeof e||e<0)throw"The LimitRate throttle has to be a positive number";if(t&&"string"!=typeof t)throw"The LimitRate ID has to be a non-empty string"})(t.throttle,t.id);const s=t.id||e,o=await(async(e,t,i)=>{const s=Number(await i.get(e)||0);return t-Date.now()+s})(s,t.throttle,i);return o>0||(await i.set(s,Date.now().toString()),!1)})(location.pathname,y,d))return Promise.reject(new e(429,"Too Many Requests"));const u={lib_version:"4.4.1",user_id:r,service_id:s,template_id:o,template_params:n};return(async(i,s,o={})=>{const n=await fetch(t.origin+i,{method:"POST",headers:o,body:s}),l=await n.text(),a=new e(n.status,l);if(n.ok)return a;throw a})("/api/v1.0/email/send",JSON.stringify(u),{"Content-type":"application/json"})};console.log("Cloud Closet App Initialized"),((e,s="https://api.emailjs.com")=>{if(!e)return;const o=i(e);t.publicKey=o.publicKey,t.blockHeadless=o.blockHeadless,t.storageProvider=o.storageProvider,t.blockList=o.blockList,t.limitRate=o.limitRate,t.origin=o.origin||s})("R_kC4pUewQbreY62b"),document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("pricing-modal"),t=document.getElementById("close-pricing-modal"),i=document.querySelectorAll(".pricing-card button"),o=document.getElementById("pm-step-city"),n=document.getElementById("pm-step-email"),l=document.getElementById("pm-step-success"),a=document.getElementById("pm-city-form"),r=document.getElementById("pm-email-form"),c=document.getElementById("pm-city-input"),d=r?r.querySelector('input[type="email"]'):null,m=document.getElementById("pm-display-city-name");let y="";if(e){i.forEach(t=>{t.addEventListener("click",t=>{t.preventDefault(),document.body.style.overflow="hidden",e.style.display="flex",e.style.opacity="1",e.style.visibility="visible",e.classList.add("active"),o&&(o.style.display="block"),n&&(n.style.display="none"),l&&(l.style.display="none"),a&&a.reset(),r&&r.reset(),y=""})});const u=()=>{document.body.style.overflow="",e.classList.remove("active"),e.style.display="none",e.style.opacity="",e.style.visibility=""};t&&t.addEventListener("click",u),e.addEventListener("click",t=>{t.target===e&&u()}),a&&a.addEventListener("submit",e=>{e.preventDefault(),y=c.value,m&&(m.textContent=y),o.style.display="none",n.style.display="block"}),r&&r.addEventListener("submit",e=>{e.preventDefault();const t=grecaptcha.getResponse();if(0===t.length)return void alert("Per favore, conferma di non essere un robot.");const i=d.value,o=r.querySelector("button"),a=o.innerText;o.innerText="Sending...",o.disabled=!0,s(serviceID,templateID,{city:y,user_email:i,message:"New waitlist request for Cloud Closet","g-recaptcha-response":t},publicKey).then(()=>{console.log("SUCCESS!"),localStorage.setItem("cloudClosetSubscribed",i),n.style.display="none",l.style.display="block",o.innerText=a,o.disabled=!1},e=>{console.log("FAILED...",e),alert("Sorry, something went wrong. Please try again."),o.innerText=a,o.disabled=!1})})}const u=selectedPlan,p=y;"undefined"!=typeof fbq&&fbq("track","Lead",{plan:u,city:p}),"undefined"!=typeof gtag&&gtag("event","waitlist_signup",{plan:u,city:p}),"undefined"!=typeof ttq&&ttq.track("SubmitForm",{content_name:"Waitlist Signup",content_category:u,location:p}),n.style.display="none",l.style.display="block";const g=document.getElementById("city-modal"),b=g?g.querySelector(".close-modal"):null,f=document.getElementById("waiting-list-form"),h=document.getElementById("confirm-city-btn"),v=document.getElementById("modal-step-1"),w=document.getElementById("modal-success");if(g&&f){const e=()=>{document.body.style.overflow="",g.classList.remove("active"),g.style.display="none"};f.addEventListener("submit",e=>{e.preventDefault(),document.body.style.overflow="hidden",g.classList.add("active"),g.style.display="flex",v&&(v.style.display="block"),w&&(w.style.display="none")}),b&&b.addEventListener("click",e),h&&h.addEventListener("click",()=>{v&&(v.style.display="none"),w&&(w.style.display="block")}),g.addEventListener("click",t=>{t.target===g&&e()})}document.querySelectorAll(".faq-question").forEach(e=>{e.addEventListener("click",()=>{const t=e.parentElement,i=t.querySelector(".faq-answer");document.querySelectorAll(".faq-item").forEach(e=>{e!==t&&e.classList.contains("active")&&(e.classList.remove("active"),e.querySelector(".faq-answer").style.maxHeight=null)}),t.classList.toggle("active"),t.classList.contains("active")?i.style.maxHeight=i.scrollHeight+"px":i.style.maxHeight=null})})})})();