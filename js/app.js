(()=>{"use strict";class e{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const t={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:(()=>{if("undefined"!=typeof localStorage)return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,t)=>Promise.resolve(localStorage.setItem(e,t)),remove:e=>Promise.resolve(localStorage.removeItem(e))}})()},n=e=>e?"string"==typeof e?{publicKey:e}:"[object Object]"===e.toString()?e:{}:{},i=async(i,s,o,r)=>{const a=n(r),l=a.publicKey||t.publicKey,c=a.blockHeadless||t.blockHeadless,d=a.storageProvider||t.storageProvider,u={...t.blockList,...a.blockList},m={...t.limitRate,...a.limitRate};if(c&&(e=>e.webdriver||!e.languages||0===e.languages.length)(navigator))return Promise.reject(new e(451,"Unavailable For Headless Browser"));if(((e,t,n)=>{if(!e||"string"!=typeof e)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||"string"!=typeof t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n||"string"!=typeof n)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"})(l,i,s),(e=>{if(e&&"[object Object]"!==e.toString())throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"})(o),o&&((e,t)=>{if((e=>!e.list?.length||!e.watchVariable)(e))return!1;((e,t)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if("string"!=typeof t)throw"The BlockList watchVariable has to be a string"})(e.list,e.watchVariable);const n=(i=t,s=e.watchVariable,i instanceof FormData?i.get(s):i[s]);var i,s;return"string"==typeof n&&e.list.includes(n)})(u,o))return Promise.reject(new e(403,"Forbidden"));if(await(async(e,t,n)=>{if(!t.throttle||!n)return!1;((e,t)=>{if("number"!=typeof e||e<0)throw"The LimitRate throttle has to be a positive number";if(t&&"string"!=typeof t)throw"The LimitRate ID has to be a non-empty string"})(t.throttle,t.id);const i=t.id||e,s=await(async(e,t,n)=>{const i=Number(await n.get(e)||0);return t-Date.now()+i})(i,t.throttle,n);return s>0||(await n.set(i,Date.now().toString()),!1)})(location.pathname,m,d))return Promise.reject(new e(429,"Too Many Requests"));const y={lib_version:"4.4.1",user_id:l,service_id:i,template_id:s,template_params:o};return(async(n,i,s={})=>{const o=await fetch(t.origin+n,{method:"POST",headers:s,body:i}),r=await o.text(),a=new e(o.status,r);if(o.ok)return a;throw a})("/api/v1.0/email/send",JSON.stringify(y),{"Content-type":"application/json"})},s="R_kC4pUewQbreY62b",o=["Z√ºrich","Geneva","Basel","Lausanne","Bern","Winterthur","Lucerne","Sankt Gallen","Biel/Bienne","Bellinzona","Thun","Fribourg","Uster","Schaffhausen","Chur","Vernier","Sion","Neuch√¢tel","Zug","Yverdon-les-Bains","Emmen","D√ºbendorf","Rapperswil-Jona","Dietikon","Wetzikon","Meyrin","Carouge","Frauenfeld","Kreuzlingen","W√§denswil","Aarau","Riehen","Allschwil","Renens","Wettingen","Nyon","B√ºlach","Vevey","Opfikon","Reinach","Baden","Onex","Schlieren","Adliswil","Volketswil","Thalwil","Olten","Pully","Regensdorf","Ostermundigen","Littau","Solothurn","Pratteln","Freienbach","Wallisellen","Wohlen","Herisau","Steffisburg","Morges","Binningen","Schwyz","Arbon","Liestal","St√§fa","K√ºsnacht","Th√¥nex","Meilen","Versoix","Richterswil","Zollikon","Gland","Muri","Ecublens","Del√©mont","Prilly","Ch√™ne-Bougeries","R√ºti","Le Grand-Saconnex","M√ºnchenstein","Villars-sur-Gl√¢ne","La Tour-de-Peilz","Spreitenbach","Veyrier","Bassersdorf","M√§nnedorf","Romanshorn","Oberwil","Brugg","Plan-les-Ouates","Neuhausen am Rheinfall","Sarnen","Aesch","Birsfelden","Lutry","Sursee","Therwil","Urdorf","Widnau","Epalinges","Rorschach","Altdorf","Goldach","Arlesheim","Zuchwil","Kilchberg","Neuenhof","Lachen","F√§llanden","Stans","Oberentfelden","Aarburg","Chiasso","Buchs","Crissier","Au","Dietlikon","Chavannes-pr√®s-Renens","Windisch","Minusio","Heimberg","Nidau","Dornach","Bottmingen","Oberengstringen","Frenkendorf","Rolle","Buchrain","Massagno","Uetikon am See","Glarus","R√ºschlikon","Peseux","Appenzell","Interlaken","Cologny","Erlenbach","Colombier","Courtepin","Greifensee","Pr√©verenges","Gerlafingen","Schwerzenbach","Oberrieden","Geroldswil","Niederglatt","Sch√∂nenwerd","Niederlenz","Cortaillod","Saint-Sulpice","Confignon","Morbio Inferiore","Caslano","Gross H√∂chstetten","Unterentfelden","Paradiso","Niederrohrdorf","Hilterfingen","Hunzenschwil","Unterengstringen","Langendorf","Belmont-sur-Lausanne","Widen","Port","Ennetbaden","Feuerthalen","Rheineck","Vacallo","Corsier-sur-Vevey","Balerna","Givisiez","Coppet","Turgi","Coldrerio","Rickenbach bei Wil","Horn","Muralto","Hauterive","Lugano"];console.log("Cloud Closet App Initialized"),((e,i="https://api.emailjs.com")=>{if(!e)return;const s=n(e);t.publicKey=s.publicKey,t.blockHeadless=s.blockHeadless,t.storageProvider=s.storageProvider,t.blockList=s.blockList,t.limitRate=s.limitRate,t.origin=s.origin||i})(s),document.addEventListener("DOMContentLoaded",()=>{let e="";const t=document.getElementById("pricing-modal"),n=document.getElementById("pm-step-city"),r=document.getElementById("pm-step-email"),a=document.getElementById("pm-step-success"),l=document.getElementById("pm-email-form"),c=document.getElementById("pm-city-input"),d=document.getElementById("pm-display-city-name"),u=document.getElementById("pm-selected-plan-input"),m=document.getElementById("hero-cta-btn");m&&m.addEventListener("click",()=>{const e=document.getElementById("join-us");e&&e.scrollIntoView({behavior:"smooth"})}),(()=>{const t=document.getElementById("pm-city-suggestions"),i=document.getElementById("pm-city-form");c&&t&&(c.addEventListener("input",function(){const e=this.value;if(t.innerHTML="",!e)return t.style.display="none",void(c.style.borderRadius="8px");const n=o.filter(t=>t.toLowerCase().startsWith(e.toLowerCase()));n.length>0?(t.style.display="block",c.style.borderRadius="8px 8px 0 0",n.forEach(n=>{const i=document.createElement("div");i.className="suggestion-item";const s=n.substr(0,e.length),o=n.substr(e.length);i.innerHTML=`<span class="suggestion-icon">üìç</span> <strong>${s}</strong>${o}`,i.addEventListener("click",function(){c.value=n,t.style.display="none",c.style.borderRadius="8px"}),t.appendChild(i)})):(t.style.display="none",c.style.borderRadius="8px")}),document.addEventListener("click",function(e){e.target!==c&&e.target!==t&&(t.style.display="none",c.style.borderRadius="8px")}),i&&i.addEventListener("submit",function(t){t.preventDefault(),t.stopImmediatePropagation();const i=c.value.trim();console.log("Validazione in corso per:",i);const s=o.find(e=>e.toLowerCase()===i.toLowerCase());if(!s)return console.log("Citt√† non valida. Blocco invio."),c.style.borderColor="red",c.style.boxShadow="0 0 0 3px rgba(255, 0, 0, 0.1)",c.animate([{transform:"translateX(0)"},{transform:"translateX(-5px)"},{transform:"translateX(5px)"},{transform:"translateX(0)"}],{duration:200,iterations:2}),void c.addEventListener("input",function(){this.style.borderColor="#ddd",this.style.boxShadow="none"},{once:!0});console.log("Citt√† valida. Procedo allo Step 2."),e=s,n&&(n.style.display="none"),r&&(r.style.display="block"),d&&(d.textContent=s)}))})(),(()=>{const i=document.getElementById("close-pricing-modal"),s=document.querySelectorAll(".pricing-card button"),o=document.getElementById("hero-cta-btn");if(!t)return;const c=i=>{document.body.style.overflow="hidden",t.style.display="flex",t.style.opacity="1",t.style.visibility="visible",t.classList.add("active"),n&&(n.style.display="block"),r&&(r.style.display="none"),a&&(a.style.display="none"),l&&l.reset(),e="",u&&i&&(u.value=i)},d=()=>{document.body.style.overflow="",t.classList.remove("active"),t.style.display="none",t.style.opacity="",t.style.visibility=""};s.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const n=e.closest(".pricing-card"),i=n?n.querySelector("h3").innerText:"";c(i)})}),o&&o.addEventListener("click",e=>{e.preventDefault(),c("")}),i&&i.addEventListener("click",d),t.addEventListener("click",e=>{e.target===t&&d()})})(),(()=>{if(!l)return;const t=l.querySelector('input[type="email"]'),n=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e);l.addEventListener("submit",o=>{o.preventDefault();const c=t?t.value.trim():"";if(!c||!n(c))return void(t&&(t.style.borderColor="red",t.style.boxShadow="0 0 0 3px rgba(255, 0, 0, 0.1)",t.animate([{transform:"translateX(0)"},{transform:"translateX(-5px)"},{transform:"translateX(5px)"},{transform:"translateX(0)"}],{duration:200,iterations:2}),t.addEventListener("input",function(){n(this.value)&&(this.style.borderColor="#ddd",this.style.boxShadow="none")},{once:!0})));const d=grecaptcha.getResponse();if(0===d.length)return void alert("Please confirm that you are not a robot.");const u=l.querySelector("button"),m=u.innerText;u.innerText="Sending...",u.disabled=!0,i("service_qt34cge","template_krgxu27",{city:e,user_email:c,message:"New waitlist request for Cloud Closet","g-recaptcha-response":d},s).then(()=>{console.log("SUCCESS!"),localStorage.setItem("cloudClosetSubscribed",c),r&&(r.style.display="none"),a&&(a.style.display="block"),u.innerText=m,u.disabled=!1},e=>{console.log("FAILED...",e),alert("Sorry, something went wrong. Please try again."),u.innerText=m,u.disabled=!1})})})(),(()=>{const e=document.getElementById("city-modal"),t=document.getElementById("waiting-list-form"),n=e?e.querySelector(".close-modal"):null,i=document.getElementById("confirm-city-btn"),s=document.getElementById("modal-step-1"),o=document.getElementById("modal-success");if(!e||!t)return;const r=()=>{document.body.style.overflow="",e.classList.remove("active"),e.style.display="none"};t.addEventListener("submit",t=>{t.preventDefault(),document.body.style.overflow="hidden",e.classList.add("active"),e.style.display="flex",s&&(s.style.display="block"),o&&(o.style.display="none")}),n&&n.addEventListener("click",r),i&&i.addEventListener("click",()=>{s&&(s.style.display="none"),o&&(o.style.display="block")}),e.addEventListener("click",t=>{t.target===e&&r()})})(),document.querySelectorAll(".faq-question").forEach(e=>{e.addEventListener("click",()=>{const t=e.parentElement,n=t.querySelector(".faq-answer");document.querySelectorAll(".faq-item").forEach(e=>{e!==t&&e.classList.contains("active")&&(e.classList.remove("active"),e.querySelector(".faq-answer").style.maxHeight=null)}),t.classList.toggle("active"),t.classList.contains("active")?n.style.maxHeight=n.scrollHeight+"px":n.style.maxHeight=null})})})})();