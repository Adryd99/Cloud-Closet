(()=>{"use strict";class e{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const t={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:(()=>{if("undefined"!=typeof localStorage)return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,t)=>Promise.resolve(localStorage.setItem(e,t)),remove:e=>Promise.resolve(localStorage.removeItem(e))}})()},n=e=>e?"string"==typeof e?{publicKey:e}:"[object Object]"===e.toString()?e:{}:{},i=async(i,s,o,l)=>{const r=n(l),a=r.publicKey||t.publicKey,c=r.blockHeadless||t.blockHeadless,d=r.storageProvider||t.storageProvider,u={...t.blockList,...r.blockList},m={...t.limitRate,...r.limitRate};if(c&&(e=>e.webdriver||!e.languages||0===e.languages.length)(navigator))return Promise.reject(new e(451,"Unavailable For Headless Browser"));if(((e,t,n)=>{if(!e||"string"!=typeof e)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||"string"!=typeof t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n||"string"!=typeof n)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"})(a,i,s),(e=>{if(e&&"[object Object]"!==e.toString())throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"})(o),o&&((e,t)=>{if((e=>!e.list?.length||!e.watchVariable)(e))return!1;((e,t)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if("string"!=typeof t)throw"The BlockList watchVariable has to be a string"})(e.list,e.watchVariable);const n=(i=t,s=e.watchVariable,i instanceof FormData?i.get(s):i[s]);var i,s;return"string"==typeof n&&e.list.includes(n)})(u,o))return Promise.reject(new e(403,"Forbidden"));if(await(async(e,t,n)=>{if(!t.throttle||!n)return!1;((e,t)=>{if("number"!=typeof e||e<0)throw"The LimitRate throttle has to be a positive number";if(t&&"string"!=typeof t)throw"The LimitRate ID has to be a non-empty string"})(t.throttle,t.id);const i=t.id||e,s=await(async(e,t,n)=>{const i=Number(await n.get(e)||0);return t-Date.now()+i})(i,t.throttle,n);return s>0||(await n.set(i,Date.now().toString()),!1)})(location.pathname,m,d))return Promise.reject(new e(429,"Too Many Requests"));const y={lib_version:"4.4.1",user_id:a,service_id:i,template_id:s,template_params:o};return(async(n,i,s={})=>{const o=await fetch(t.origin+n,{method:"POST",headers:s,body:i}),l=await o.text(),r=new e(o.status,l);if(o.ok)return r;throw r})("/api/v1.0/email/send",JSON.stringify(y),{"Content-type":"application/json"})};console.log("Cloud Closet App Initialized"),((e,i="https://api.emailjs.com")=>{if(!e)return;const s=n(e);t.publicKey=s.publicKey,t.blockHeadless=s.blockHeadless,t.storageProvider=s.storageProvider,t.blockList=s.blockList,t.limitRate=s.limitRate,t.origin=s.origin||i})("R_kC4pUewQbreY62b"),document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("pricing-modal"),t=document.getElementById("close-pricing-modal"),n=document.querySelectorAll(".pricing-card button"),s=document.getElementById("pm-step-city"),o=document.getElementById("pm-step-email"),l=document.getElementById("pm-step-success"),r=document.getElementById("pm-email-form"),a=(document.getElementById("pm-city-input"),r?r.querySelector('input[type="email"]'):null);document.getElementById("pm-display-city-name");let c="";if(e){n.forEach(t=>{t.addEventListener("click",t=>{t.preventDefault(),document.body.style.overflow="hidden",e.style.display="flex",e.style.opacity="1",e.style.visibility="visible",e.classList.add("active"),s&&(s.style.display="block"),o&&(o.style.display="none"),l&&(l.style.display="none"),r&&r.reset(),c=""})});const d=()=>{document.body.style.overflow="",e.classList.remove("active"),e.style.display="none",e.style.opacity="",e.style.visibility=""};t&&t.addEventListener("click",d),e.addEventListener("click",t=>{t.target===e&&d()}),r&&r.addEventListener("submit",e=>{e.preventDefault();const t=grecaptcha.getResponse();if(0===t.length)return void alert("Per favore, conferma di non essere un robot.");const n=a.value,s=r.querySelector("button"),d=s.innerText;s.innerText="Sending...",s.disabled=!0,i("service_qt34cge","template_krgxu27",{city:c,user_email:n,message:"New waitlist request for Cloud Closet","g-recaptcha-response":t},"R_kC4pUewQbreY62b").then(()=>{console.log("SUCCESS!"),localStorage.setItem("cloudClosetSubscribed",n),o.style.display="none",l.style.display="block",s.innerText=d,s.disabled=!1},e=>{console.log("FAILED...",e),alert("Sorry, something went wrong. Please try again."),s.innerText=d,s.disabled=!1})})}o.style.display="none",l.style.display="block";const d=document.getElementById("city-modal"),u=d?d.querySelector(".close-modal"):null,m=document.getElementById("waiting-list-form"),y=document.getElementById("confirm-city-btn"),p=document.getElementById("modal-step-1"),g=document.getElementById("modal-success");if(d&&m){const e=()=>{document.body.style.overflow="",d.classList.remove("active"),d.style.display="none"};m.addEventListener("submit",e=>{e.preventDefault(),document.body.style.overflow="hidden",d.classList.add("active"),d.style.display="flex",p&&(p.style.display="block"),g&&(g.style.display="none")}),u&&u.addEventListener("click",e),y&&y.addEventListener("click",()=>{p&&(p.style.display="none"),g&&(g.style.display="block")}),d.addEventListener("click",t=>{t.target===d&&e()})}document.querySelectorAll(".faq-question").forEach(e=>{e.addEventListener("click",()=>{const t=e.parentElement,n=t.querySelector(".faq-answer");document.querySelectorAll(".faq-item").forEach(e=>{e!==t&&e.classList.contains("active")&&(e.classList.remove("active"),e.querySelector(".faq-answer").style.maxHeight=null)}),t.classList.toggle("active"),t.classList.contains("active")?n.style.maxHeight=n.scrollHeight+"px":n.style.maxHeight=null})})}),document.addEventListener("DOMContentLoaded",function(){const e=["Z√ºrich","Geneva","Basel","Lausanne","Bern","Winterthur","Lucerne","Sankt Gallen","Biel/Bienne","Bellinzona","Thun","Fribourg","Uster","Schaffhausen","Chur","Vernier","Sion","Neuch√¢tel","Zug","Yverdon-les-Bains","Emmen","D√ºbendorf","Rapperswil-Jona","Dietikon","Wetzikon","Meyrin","Carouge","Frauenfeld","Kreuzlingen","W√§denswil","Aarau","Riehen","Allschwil","Renens","Wettingen","Nyon","B√ºlach","Vevey","Opfikon","Reinach","Baden","Onex","Schlieren","Adliswil","Volketswil","Thalwil","Olten","Pully","Regensdorf","Ostermundigen","Littau","Solothurn","Pratteln","Freienbach","Wallisellen","Wohlen","Herisau","Steffisburg","Morges","Binningen","Schwyz","Arbon","Liestal","St√§fa","K√ºsnacht","Th√¥nex","Meilen","Versoix","Richterswil","Zollikon","Gland","Muri","Ecublens","Del√©mont","Prilly","Ch√™ne-Bougeries","R√ºti","Le Grand-Saconnex","M√ºnchenstein","Villars-sur-Gl√¢ne","La Tour-de-Peilz","Spreitenbach","Veyrier","Bassersdorf","M√§nnedorf","Romanshorn","Oberwil","Brugg","Plan-les-Ouates","Neuhausen am Rheinfall","Sarnen","Aesch","Birsfelden","Lutry","Sursee","Therwil","Urdorf","Widnau","Epalinges","Rorschach","Altdorf","Goldach","Arlesheim","Zuchwil","Kilchberg","Neuenhof","Lachen","F√§llanden","Stans","Oberentfelden","Aarburg","Chiasso","Buchs","Crissier","Au","Dietlikon","Chavannes-pr√®s-Renens","Windisch","Minusio","Heimberg","Nidau","Dornach","Bottmingen","Oberengstringen","Frenkendorf","Rolle","Buchrain","Massagno","Uetikon am See","Glarus","R√ºschlikon","Peseux","Appenzell","Interlaken","Cologny","Erlenbach","Colombier","Courtepin","Greifensee","Pr√©verenges","Gerlafingen","Schwerzenbach","Oberrieden","Geroldswil","Niederglatt","Sch√∂nenwerd","Niederlenz","Cortaillod","Saint-Sulpice","Confignon","Morbio Inferiore","Caslano","Gross H√∂chstetten","Unterentfelden","Paradiso","Niederrohrdorf","Hilterfingen","Hunzenschwil","Unterengstringen","Langendorf","Belmont-sur-Lausanne","Widen","Port","Ennetbaden","Feuerthalen","Rheineck","Vacallo","Corsier-sur-Vevey","Balerna","Givisiez","Coppet","Turgi","Coldrerio","Rickenbach bei Wil","Horn","Muralto","Hauterive","Lugano"],t=document.getElementById("pm-city-input"),n=document.getElementById("pm-city-suggestions");if(t&&n){t.addEventListener("input",function(){const i=this.value;if(n.innerHTML="",!i)return n.style.display="none",void(t.style.borderRadius="8px");const s=e.filter(e=>e.toLowerCase().startsWith(i.toLowerCase()));s.length>0?(n.style.display="block",t.style.borderRadius="8px 8px 0 0",s.forEach(e=>{const s=document.createElement("div");s.className="suggestion-item";const o=e.substr(0,i.length),l=e.substr(i.length);s.innerHTML=`<span class="suggestion-icon">üìç</span> <strong>${o}</strong>${l}`,s.addEventListener("click",function(){t.value=e,n.style.display="none",t.style.borderRadius="8px"}),n.appendChild(s)})):(n.style.display="none",t.style.borderRadius="8px")}),document.addEventListener("click",function(e){e.target!==t&&e.target!==n&&(n.style.display="none",t.style.borderRadius="8px")});const i=document.getElementById("pm-city-form");i&&i.addEventListener("submit",function(n){n.preventDefault(),n.stopImmediatePropagation();const i=t.value.trim();console.log("Validazione in corso per:",i);const s=e.find(e=>e.toLowerCase()===i.toLowerCase());if(!s)return console.log("Citt√† non valida. Blocco invio."),t.style.borderColor="red",t.style.boxShadow="0 0 0 3px rgba(255, 0, 0, 0.1)",t.animate([{transform:"translateX(0)"},{transform:"translateX(-5px)"},{transform:"translateX(5px)"},{transform:"translateX(0)"}],{duration:200,iterations:2}),void t.addEventListener("input",function(){this.style.borderColor="#ddd",this.style.boxShadow="none"},{once:!0});console.log("Citt√† valida. Procedo allo Step 2."),document.getElementById("pm-step-city").style.display="none",document.getElementById("pm-step-email").style.display="block";const o=document.getElementById("pm-display-city-name");o&&(o.textContent=s)})}const i=document.querySelectorAll(".pricing-card button"),s=document.getElementById("pricing-modal"),o=document.getElementById("pm-selected-plan-input"),l=document.getElementById("close-pricing-modal");i.forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const t=this.closest(".pricing-card");if(t){const e=t.querySelector("h3").innerText;o&&(o.value=e)}!function(){if(!s)return;s.style.display="flex";const e=document.getElementById("pm-step-city"),t=document.getElementById("pm-step-email"),n=document.getElementById("pm-step-success");e&&(e.style.display="block"),t&&(t.style.display="none"),n&&(n.style.display="none")}()})}),l&&l.addEventListener("click",function(){s.style.display="none"}),window.addEventListener("click",function(e){e.target===s&&(s.style.display="none")})})})();